!function(){angular.module("angularSpa",["ngRoute"]).config(["$routeProvider",function(o){o.when("/home",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/actors",{templateUrl:"views/actors.html",controller:"ActorsCtrl"}).when("/usuarios",{templateUrl:"views/usuarios.html",controller:"UsuariosCtrl"}).when("/actors/:actorId",{templateUrl:"views/showActor.html",controller:"showActorCtrl"}).when("/crearactors",{templateUrl:"views/crearActor.html",controller:"crearActorCtrl"}).when("/crearusuarios",{templateUrl:"views/crearUsuario.html",controller:"crearUsuarioCtrl"}).when("/mapa",{templateUrl:"views/map.html",controller:"MapCtrl"}).otherwise({redirectTo:"/home"})}])}();var cities=[{city:"Ingenieria Industrial",desc:"Estacionamiento",lat:-33.4505,"long":-70.688},{city:"New York",desc:"This city is aiiiiite!",lat:40.67,"long":-73.94},{city:"Chicago",desc:"This is the second best city in the world!",lat:41.8819,"long":-87.6278},{city:"Los Angeles",desc:"This city is live!",lat:34.05,"long":-118.25},{city:"Las Vegas",desc:"Sin City...'nuff said!",lat:36.08,"long":-115.1522}];angular.module("angularSpa").controller("MapCtrl",["$scope",function(o){var e={zoom:16,center:new google.maps.LatLng(-33.450178,-70.686327),mapTypeId:google.maps.MapTypeId.TERRAIN};o.map=new google.maps.Map(document.getElementById("map"),e),o.markers=[];var a=new google.maps.InfoWindow,r=function(e){var r=new google.maps.Marker({map:o.map,position:new google.maps.LatLng(e.lat,e["long"]),title:e.city});r.content='<div class="infoWindowContent">'+e.desc+"</div>",google.maps.event.addListener(r,"click",function(){a.setContent("<h2>"+r.title+"</h2>"+r.content),a.open(o.map,r)}),o.markers.push(r)};for(i=0;i<cities.length;i++)r(cities[i]);o.openInfoWindow=function(o,e){o.preventDefault(),google.maps.event.trigger(e,"click")}}]),angular.module("angularSpa").controller("UsuariosCtrl",["$scope","usuariosService",function(o,e){function a(){e.getUsuarios().success(function(e){o.usuarios=e}).error(function(e){o.status="Error al consultar por usuarios"})}o.usuarios=[],a()}]),function(){angular.module("angularSpa").controller("AboutCtrl",["$scope",function(o){o.items=["plis","work","for sake"]}])}(),angular.module("angularSpa").service("crearActorSrv",["$http","$routeParams",function(o,e){this.getActor=function(){var e="http://localhost:8080/sakila-backend-master/actors/";return o.get(e)},this.crearActor=function(e,a){var r=o({method:"post",url:"http://localhost:8080/sakila-backend-master/actors",data:{firstName:e,lastName:a},headers:{"Content-Type":"application/json"}});return r}}]),function(){angular.module("angularSpa").controller("crearUsuarioCtrl",["$scope","$http","crearUsuarioSrv",function(o,e,a){o.crearUsuario=function(){a.crearUsuario(o.form.nombre,o.form.apellido,o.form.email,o.form.nickname,o.form.password,o.form.direccion,o.form.sexo,o.form.telefono,o.form.fechanacimiento).success(function(e){o.usuarios=e,console.log(e)}).error(function(e){o.usuarios="Error al consultar por usuarios"}),o.form.nombre="",o.form.apellido="",o.form.email="",o.form.nickname="",o.form.password="",o.form.direccion="",o.form.sexo="",o.form.telefono="",o.form.fechanacimiento=""}}])}(),angular.module("angularSpa").service("crearUsuarioSrv",["$http","$routeParams",function(o,e){this.getUsuario=function(){var e="http://localhost:8080/sakila-backend-master/usuarios/";return o.get(e)},this.crearUsuario=function(e,a,r,t,n,i,s,c,l){var u=o({method:"post",url:"http://localhost:8080/sakila-backend-master/usuarios",data:{apellido:a,direccion:i,email:r,fechaNacimiento:l,nickname:t,nombre:e,password:n,sexo:s,telefono:c},headers:{"Content-Type":"application/json"}});return u}}]),angular.module("angularSpa").controller("EstacionamientosCtrl",["$scope","estacionamientosService",function(o,e){function a(){e.getEstacionamientos().success(function(e){o.estacionamientos=e}).error(function(e){o.status="Error al consultar por estacionamientos"})}o.estacionamientos=[],a()}]),angular.module("angularSpa").service("estacionamientosService",["$http",function(o){var e="http://localhost:8080/sakila-backend-master/estacionamientos";this.getEstacionamientos=function(){return o.get(e)}}]),function(){angular.module("angularSpa").controller("MainCtrl",["$scope","estacionamientosService",function(o,e){function a(){e.getEstacionamientos().success(function(e){for(o.estacionamientos=e,i=0;i<o.estacionamientos.length;i++)n(o.estacionamientos[i])}).error(function(e){o.status="Error al consultar por estacionamientos"})}o.estacionamientos=[],o.wololo=[],a();var r={zoom:16,center:new google.maps.LatLng(-33.450178,-70.686327),mapTypeId:google.maps.MapTypeId.TERRAIN};o.markers=[],o.map=new google.maps.Map(document.getElementById("map"),r);var t=new google.maps.InfoWindow,n=function(e){var a=new google.maps.Marker({map:o.map,position:new google.maps.LatLng(e.ubi_x,e.ubi_y),title:e.nombreEstacionamiento}),r=e.capacidad-e.ocupados;a.content='<div class="infoWindowContent">Capacidad del Estacionamiento: '+e.capacidad+"<br/>Estacionamientos disponibles:"+r+"</div>",google.maps.event.addListener(a,"click",function(){t.setContent("<h2>"+a.title+"</h2>"+a.content),t.open(o.map,a)}),o.markers.push(a)};o.openInfoWindow=function(o,e){o.preventDefault(),google.maps.event.trigger(e,"click")},o.crearUsuario=function(){crearUsuarioSrv.crearUsuario(o.form.nombre,o.form.apellido,o.form.email,o.form.nickname,o.form.password,o.form.direccion,o.form.sexo,o.form.telefono,o.form.fechanacimiento).success(function(e){o.usuarios=e,console.log(e)}).error(function(e){o.usuarios="Error al consultar por usuarios"}),o.form.nombre="",o.form.apellido="",o.form.email="",o.form.nickname="",o.form.password="",o.form.direccion="",o.form.sexo="",o.form.telefono="",o.form.fechanacimiento=""}}])}(),angular.module("angularSpa").controller("showActorCtrl",["$scope","$routeParams","showActorSrv",function(o,e,a){function r(){a.getActor(e.actorId).success(function(e){o.actors=e}).error(function(e){o.status="Error al consultar por actores"})}o.actors=[],console.log("Parametros"+e.id),r()}]),angular.module("angularSpa").service("showActorSrv",["$http",function(o){var e="http://localhost:8080/sakila-backend-master/actors/";this.getActor=function(a){return o.get(e+a)}}]),angular.module("angularSpa").service("usuariosService",["$http",function(o){var e="http://localhost:8080/sakila-backend-master/usuarios";this.getUsuarios=function(){return o.get(e)}}]);